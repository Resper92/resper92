<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Profile</title>
    <style>
        #itemForm, #historyTable {
            display: none; /* Nasconde il form e la tabella inizialmente */
        }
        table, th, td {
            border: 1px solid black;
            border-collapse: collapse;
            padding: 8px;
        }
    </style>
    <script>
        function showForm() {
            document.getElementById('itemForm').style.display = 'block';
            document.getElementById('showButton').style.display = 'none';
        }

        function toggleTable() {
            const table = document.getElementById('historyTable');
            const toggleButton = document.getElementById('toggleButton');
            if (table.style.display === 'none' || table.style.display === '') {
                table.style.display = 'table';
                toggleButton.textContent = 'Hide Search History';
            } else {
                table.style.display = 'none';
                toggleButton.textContent = 'Show Search History';
            }
        }
    </script>
</head>
<body>

    <h1>Add Item</h1>
    <button id="showButton" onclick="showForm()">Add Item</button>

    <form id="itemForm" action="/item" method="post">
        Name: <br>
        <input type="text" name="name" required><br>
        Photo URL:<br>
        <input type="text" name="photo" required><br>
        Description: <br>
        <input type="text" name="description" required><br>
        Price per hour: <br>
        <input type="number" name="price_hour" step="0.01" required><br>
        Price per day:<br>
        <input type="number" name="price_day" step="0.01" required><br>
        Price per week: <br>
        <input type="number" name="price_week" step="0.01" required><br>
        Price per month: <br>
        <input type="number" name="price_month" step="0.01" required><br>

        <input type="submit" value="Send">
    </form>

    <h2>Navigation History</h2>
    <button id="toggleButton" onclick="toggleTable()">Show Search History</button>
    <form id="history" action="/profile/history" method="get"></form>
    <table id="historyTable">
        {% if history %}
            <tr>
                <th>Search</th>
                <th>Timestamp</th>
            </tr>
            {% for one_history in history %}
            <tr>
                <td>{{ search_text }}</td> <!-- Colonna per 'search_text' -->
                <td>{{ timestamp }}</td> <!-- Colonna per 'timestamp' -->
            </tr>
            {% endfor %}
        {% else %}
            <tr>
                <td colspan="2">No search history available.</td>
            </tr>
        {% endif %}
    </table>

</body>
</html>
